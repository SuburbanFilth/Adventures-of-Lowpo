os: linux
dist: bionic
compiler: gcc-8
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - gcc-8
language: cpp
notifications: never
before_install: bash ./scripts/before_install.sh
jobs:
  include:
    - stage: "Build and Test"
      name: "Unit Tests"
      script: bash ./scripts/build_and_run_unit_tests.sh
      name: "Code Coverage"
    - script: bash ./scripts/run_code_coverage.sh
      name: "Documentation Generation"
    - script: mkdir docs && bash ./scripts/run_doxygen.sh
      deploy:
        provider: pages
        token: $GH_TOKEN
        local_dir: ./docs/html